# EUC Leadership Dashboard

A data dashboard for Empower Upper Cumberland - a $25M TANF-funded poverty alleviation pilot in rural Tennessee.

**Live Dashboard:** https://euc-leadership-dashboard.vercel.app

## Project Structure

```
EUC_Leadership_Dashboard/
├── dashboard/           # Next.js web app (deployed to Vercel)
│   ├── app/            # Pages and routes
│   ├── components/     # React components
│   └── lib/data/       # JSON data files (generated by pipeline)
│
├── pipeline/           # Python ETL & analytics
│   ├── etl/           # Load & transform Excel exports
│   └── analytics/     # ROI, cliff analysis, metrics
│
├── data/              # Data files (not in Git - see below)
│   ├── raw/           # Excel exports from UAT
│   └── processed/     # Generated CSVs
│
├── docs/              # Documentation
│   ├── euc-context.md      # Program background
│   └── data-dictionary.md  # Field definitions
│
└── pyproject.toml     # Python dependencies
```

## Quick Start

### Prerequisites
- Python 3.11+ with [uv](https://github.com/astral-sh/uv)
- Node.js 18+
- Git

### Setup
```bash
# Clone the repo
git clone https://github.com/Empower-UC/EUC_Leadership_Dashboard.git
cd EUC_Leadership_Dashboard

# Install Python dependencies
uv sync

# Install dashboard dependencies
cd dashboard && npm install && cd ..
```

### Run the Pipeline
Place Excel files in `data/raw/`, then:
```bash
uv run python -m pipeline.etl.pipeline
```

This generates JSON files in `dashboard/lib/data/`.

### Run Dashboard Locally
```bash
cd dashboard
npm run dev
```
Open http://localhost:3000

### Deploy to Production
```bash
vercel --prod
```

---

## Git Collaboration Guide

### First Time Setup

1. **Get added to the GitHub organization**
   - Ask a team admin to invite you to [Empower-UC](https://github.com/Empower-UC)

2. **Clone the repository**
   ```bash
   git clone https://github.com/Empower-UC/EUC_Leadership_Dashboard.git
   cd EUC_Leadership_Dashboard
   ```

3. **Configure your identity**
   ```bash
   git config user.name "Your Name"
   git config user.email "your.email@example.com"
   ```

### Daily Workflow

#### Before Starting Work
Always pull the latest changes:
```bash
git pull
```

#### Making Changes

1. **Check what's changed**
   ```bash
   git status
   ```

2. **Stage your changes**
   ```bash
   # Stage specific files
   git add dashboard/lib/data/overview.json

   # Or stage everything
   git add .
   ```

3. **Commit with a clear message**
   ```bash
   git commit -m "Update active count to 205 per Navigator Dashboard"
   ```

4. **Push to GitHub**
   ```bash
   git push
   ```

### Common Scenarios

#### Scenario: Monthly Data Refresh
```bash
# 1. Pull latest code
git pull

# 2. Copy new Excel files to data/raw/
cp ~/Downloads/*.xlsx data/raw/

# 3. Run the pipeline
uv run python -m pipeline.etl.pipeline

# 4. Commit and push
git add .
git commit -m "Monthly data refresh - January 2026"
git push

# 5. Deploy (auto-deploys on push, or manually)
vercel --prod
```

#### Scenario: Someone Else Made Changes
```bash
# If git push fails with "rejected", pull first:
git pull

# If there are conflicts, Git will tell you which files.
# Open those files, look for <<<<<<< markers, fix them, then:
git add .
git commit -m "Merge conflicts resolved"
git push
```

#### Scenario: Undo Last Commit (before pushing)
```bash
git reset --soft HEAD~1
# Your changes are still there, just uncommitted
```

#### Scenario: Discard Local Changes
```bash
# Discard changes to a specific file
git checkout -- dashboard/lib/data/overview.json

# Discard ALL local changes (careful!)
git checkout -- .
```

### Git Commands Cheat Sheet

| Command | What It Does |
|---------|--------------|
| `git status` | See what files changed |
| `git pull` | Get latest from GitHub |
| `git add .` | Stage all changes |
| `git commit -m "msg"` | Save changes locally |
| `git push` | Upload to GitHub |
| `git log --oneline -5` | See recent commits |
| `git diff` | See what changed |

### What NOT to Commit

These are in `.gitignore` and should never be committed:
- `data/raw/` - Contains PII (Excel files)
- `data/processed/` - Generated CSVs
- `node_modules/` - npm packages
- `.env.local` - Secrets

---

## Data Security

**Never commit raw data files.** The `data/` folder is gitignored because Excel exports contain PII (names, addresses, SSNs).

Only aggregated, anonymized JSON files in `dashboard/lib/data/` are committed.

---

## Key Metrics

| Metric | Value |
|--------|-------|
| Total Families Served | 940 |
| Active Cases | 205 |
| Graduates (225%+ FPL) | 79 |
| Total Wage Gains | $6.4M |

---

## Team

- **Mark Farley** - EUC Executive Director
- **Megan Spurgeon** - EUC Program Lead

## Links

- [Live Dashboard](https://euc-leadership-dashboard.vercel.app)
- [GitHub Repository](https://github.com/Empower-UC/EUC_Leadership_Dashboard)
- [Vercel Project](https://vercel.com/lpoulsen17s-projects/euc-leadership-dashboard)
